const IERC20 = artifacts.require('IERC20')
const IMintableERC20 = artifacts.require('IMintableERC20')
const ILendingPool = artifacts.require('ILendingPool')
const IStakedAave = artifacts.require('IStakedAave')
const IStakedTokenIncentivesController = artifacts.require('IStakedTokenIncentivesController')

// from https://etherscan.io/address/0xe42f02713aec989132c1755117f768dbea523d2f#code
const stkAAVEBytecode =
  '0x61016060405260006009553480156200001757600080fd5b5060405162003c8c38038062003c8c8339810160408190526200003a9162000303565b85856001600160801b0316858581600390805190602001906200005f9291906200016d565b508051620000759060049060208401906200016d565b505060058054601260ff19909116179055506200009f42826200011f602090811b6200196f17901c565b60805250606090811b6001600160601b031990811660a0528c821b811660c0528b821b811660e0526101008b90526101208a90529088901b1661014052600880546001600160a01b0319166001600160a01b0383161790556200010e8262000157602090811b6200199417901c565b505050505050505050505062000441565b600082820183811015620001505760405162461bcd60e51b815260040162000147906200040a565b60405180910390fd5b9392505050565b6005805460ff191660ff92909216919091179055565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282620001a55760008555620001f0565b82601f10620001c057805160ff1916838001178555620001f0565b82800160010185558215620001f0579182015b82811115620001f0578251825591602001919060010190620001d3565b50620001fe92915062000202565b5090565b5b80821115620001fe576000815560010162000203565b80516001600160a01b03811681146200023157600080fd5b919050565b600082601f83011262000247578081fd5b81516001600160401b03808211156200025c57fe5b6040516020601f8401601f19168201810183811183821017156200027c57fe5b806040525081945083825286818588010111156200029957600080fd5b600092505b83831015620002bd57858301810151828401820152918201916200029e565b83831115620002cf5760008185840101525b5050505092915050565b80516001600160801b03811681146200023157600080fd5b805160ff811681146200023157600080fd5b60008060008060008060008060008060006101608c8e03121562000325578687fd5b620003308c62000219565b9a506200034060208d0162000219565b995060408c0151985060608c015197506200035e60808d0162000219565b96506200036e60a08d0162000219565b95506200037e60c08d01620002d9565b60e08d01519095506001600160401b038111156200039a578485fd5b620003a88e828f0162000236565b6101008e015190955090506001600160401b03811115620003c7578384fd5b620003d58e828f0162000236565b935050620003e76101208d01620002f1565b9150620003f86101408d0162000219565b90509295989b509295989b9093969950565b6020808252601b908201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604082015260600190565b60805160a05160601c60c05160601c60e05160601c61010051610120516101405160601c6137aa620004e260003980610d655280610ebd52508061075f52806109b7528061172c52508061071b52806107875280610ae05280611751525080610df45280610e93525080610833528061095a52806110d352508061114952806114e1525080610d41528061299852806129d45280612a0152506137aa6000f3fe608060405234801561001057600080fd5b50600436106102d65760003560e01c8063919cd40f11610182578063b2f4201d116100e9578063d505accf116100a2578063dde43cba1161007c578063dde43cba146105c3578063f11b8188146105cb578063f1cc432a146105ed578063f713d8a814610600576102d6565b8063d505accf1461058a578063dc937e1c1461059d578063dd62ed3e146105b0576102d6565b8063b2f4201d1461052e578063b9844d8d14610541578063c2ffbb9114610554578063c3863ada14610567578063c3cda5201461056f578063cbcbb50714610582576102d6565b8063a457c2d71161013b578063a457c2d7146104d2578063a9059cbb146104e5578063aa9fbe02146104f8578063aaf5eb6814610500578063adc9772e14610508578063b2a5dbfa1461051b576102d6565b8063919cd40f1461048c578063946776cd1461049457806395d89b411461049c578063981b24d0146104a457806399248ea7146104b75780639a99b4f0146104bf576102d6565b8063395093511161024157806372b49d63116101fa5780637bb73c97116101d45780637bb73c971461044b5780637e90d7ef1461045e5780638129fc1c146104715780638dbefee214610479576102d6565b806372b49d6314610433578063781603761461043b578063787a08a614610443576102d6565b806339509351146103be57806341cbf54a146103d15780635b3cc0cf146103d95780635c19a95c146103fa5780636f50458d1461040d57806370a0823114610420576102d6565b806330adf81f1161029357806330adf81f14610369578063312f6b8314610371578063313ce567146103865780633373ee4c1461039b578063359c4a96146103ae5780633644e515146103b6576102d6565b806306fdde03146102db578063091030c3146102f9578063095ea7b31461031957806318160ddd146103395780631e9a69501461034157806323b872dd14610356575b600080fd5b6102e3610613565b6040516102f09190613125565b60405180910390f35b61030c610307366004612c71565b6106a9565b6040516102f0919061304e565b61032c610327366004612dbb565b6106bb565b6040516102f09190613043565b61030c6106d9565b61035461034f366004612dbb565b6106df565b005b61032c610364366004612cbd565b6108ac565b61030c610934565b610379610958565b6040516102f09190612ff2565b61038e61097c565b6040516102f091906136a5565b61030c6103a9366004612c8b565b610985565b61030c6109b5565b61030c6109d9565b61032c6103cc366004612dbb565b6109df565b61030c610a2d565b6103ec6103e7366004612dbb565b610a51565b6040516102f0929190613653565b610354610408366004612c71565b610a82565b61037961041b366004612d61565b610a9d565b61030c61042e366004612c71565b610abf565b61030c610ade565b6102e3610b02565b610354610b1f565b61030c610459366004612c71565b610b7e565b61030c61046c366004612c71565b610b90565b610354610ba2565b61030c610487366004612c71565b610c90565b61030c610d3f565b610379610d63565b6102e3610d87565b61030c6104b2366004612f2d565b610de8565b610379610df2565b6103546104cd366004612dbb565b610e16565b61032c6104e0366004612dbb565b610f34565b61032c6104f3366004612dbb565b610f9c565b61030c610fb0565b61038e610fd4565b610354610516366004612dbb565b610fd9565b610354610529366004612e76565b61113e565b61030c61053c366004612d61565b6112f1565b61030c61054f366004612c71565b611319565b61030c610562366004612de4565b61132b565b610379611354565b61035461057d366004612e1f565b611363565b6103796114df565b610354610598366004612cf8565b611503565b6103546105ab366004612d61565b611690565b61030c6105be366004612c8b565b61169f565b61030c6116ca565b6105de6105d9366004612c71565b6116cf565b6040516102f09392919061366d565b61030c6105fb366004612f45565b6116fd565b61035461060e366004612d8a565b6117f2565b60038054604080516020601f600260001961010060018816150201909516949094049384018190048102820181019092528281526060939092909183018282801561069f5780601f106106745761010080835404028352916020019161069f565b820191906000526020600020905b81548152906001019060200180831161068257829003601f168201915b5050505050905090565b603e6020526000908152604090205481565b60006106cf6106c86119aa565b84846119ae565b5060015b92915050565b60025490565b806107055760405162461bcd60e51b81526004016106fc90613202565b60405180910390fd5b336000908152603e602052604090205461073f817f000000000000000000000000000000000000000000000000000000000000000061196f565b421161075d5760405162461bcd60e51b81526004016106fc9061328f565b7f00000000000000000000000000000000000000000000000000000000000000006107b26107ab837f000000000000000000000000000000000000000000000000000000000000000061196f565b4290611a62565b11156107d05760405162461bcd60e51b81526004016106fc9061347c565b60006107db33610abf565b905060008184116107ec57836107ee565b815b90506107fc33836001611aa4565b506108073382611b48565b6108118282611a62565b61082657336000908152603e60205260408120555b61085a6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000168683611c2a565b846001600160a01b0316336001600160a01b03167fd12200efa34901b99367694174c3b0d32c99585fdf37c7c26892136ddd0836d98360405161089d919061304e565b60405180910390a35050505050565b60006108b9848484611c80565b610929846108c56119aa565b61092485604051806060016040528060288152602001613728602891396001600160a01b038a166000908152600160205260408120906109036119aa565b6001600160a01b031681526020810191909152604001600020549190611d4c565b6119ae565b5060015b9392505050565b7f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c981565b7f000000000000000000000000000000000000000000000000000000000000000081565b60055460ff1690565b6001600160a01b038082166000908152603c60209081526040808320938616835260029093019052205492915050565b7f000000000000000000000000000000000000000000000000000000000000000081565b60435481565b60006106cf6109ec6119aa565b8461092485600160006109fd6119aa565b6001600160a01b03908116825260208083019390935260409182016000908120918c16815292529020549061196f565b7f9a9a49b990ba9bb39f8048c490a40ab25c18f55d208d5fbcf958261a9b48716d81565b60066020908152600092835260408084209091529082529020546001600160801b0380821691600160801b90041682565b610a8e33826000611d78565b610a9a33826001611d78565b50565b600080610aa983611e55565b92505050610ab78482611e8f565b949350505050565b6001600160a01b0381166000908152602081905260409020545b919050565b7f000000000000000000000000000000000000000000000000000000000000000081565b604051806040016040528060018152602001603160f81b81525081565b610b2833610abf565b610b445760405162461bcd60e51b81526004016106fc9061356f565b336000818152603e6020526040808220429055517ff52f50426b32362d3e6bb8cb36b7074756b224622def6352a59eac7f66ebe6e89190a2565b60076020526000908152604090205481565b603d6020526000908152604090205481565b6000610bac611eba565b90506009548111610bcf5760405162461bcd60e51b81526004016106fc906132ff565b6009819055467f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f610bfe610613565b805160209182012060408051808201825260018152603160f81b9084015251610c4e93927fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc69186913091016130db565b60408051808303601f190181529181528151602092830120604355306000908152603c909252902080546001600160801b0316630304c28160851b1790555050565b60408051600180825281830190925260009160609190816020015b610cb3612bf9565b815260200190600190039081610cab5790505090506040518060600160405280306001600160a01b03168152602001610ceb85610abf565b8152602001610cf86106d9565b81525081600081518110610d0857fe5b602002602001018190525061092d610d208483611ebf565b6001600160a01b0385166000908152603d60205260409020549061196f565b7f000000000000000000000000000000000000000000000000000000000000000081565b7f000000000000000000000000000000000000000000000000000000000000000081565b60048054604080516020601f600260001961010060018816150201909516949094049384018190048102820181019092528281526060939092909183018282801561069f5780601f106106745761010080835404028352916020019161069f565b60006106d36106d9565b7f000000000000000000000000000000000000000000000000000000000000000081565b6000610e2c33610e2533610abf565b6000611aa4565b905060006000198314610e3f5782610e41565b815b9050610e7e816040518060400160405280600e81526020016d1253959053125117d05353d5539560921b81525084611d4c9092919063ffffffff16565b336000908152603d6020526040902055610ee37f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03167f00000000000000000000000000000000000000000000000000000000000000008684611fb0565b836001600160a01b0316336001600160a01b03167f9310ccfcb8de723f578a9e4282ea9f521f05ae40dc08f3068dfad528a65ee3c783604051610f26919061304e565b60405180910390a350505050565b60006106cf610f416119aa565b84610924856040518060600160405280602581526020016137506025913960016000610f6b6119aa565b6001600160a01b03908116825260208083019390935260409182016000908120918d16815292529020549190611d4c565b60006106cf610fa96119aa565b8484611c80565b7f10d8d059343739efce7dad10d09f0806da52b252b3e6a7951920d2d6ec4102e581565b601281565b80610ff65760405162461bcd60e51b81526004016106fc90613202565b600061100183610abf565b905060006110188430846110136106d9565b611fd1565b90508015611096577f2468f9268c60ad90e2d49edb0032c8a001e733ae888b3ab8e982edf535be1a76848260405161105192919061302a565b60405180910390a16001600160a01b0384166000908152603d602052604090205461107c908261196f565b6001600160a01b0385166000908152603d60205260409020555b6110a360008486856116fd565b6001600160a01b0385166000908152603e60205260409020556110c68484612090565b6110fb6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016333086611fb0565b836001600160a01b0316336001600160a01b03167f5dac0c1b1112564a045ba943c9d50270893e8e826c49be8e7073adc713ab7bd785604051610f26919061304e565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146111865760405162461bcd60e51b81526004016106fc906133a0565b60005b818110156112ec576000603c60008585858181106111a357fe5b90506060020160400160208101906111bb9190612c71565b6001600160a01b03166001600160a01b0316815260200190815260200160002090506112208484848181106111ec57fe5b90506060020160400160208101906112049190612c71565b8286868681811061121157fe5b90506060020160200135612144565b5083838381811061122d57fe5b6112439260206060909202019081019150612f06565b81546001600160801b0319166001600160801b039190911617815583838381811061126a57fe5b90506060020160400160208101906112829190612c71565b6001600160a01b03167f87fa03892a0556cb6b8f97e6d533a150d4d55fcbf275fff5fa003fa636bcc7fa8585858181106112b857fe5b6112ce9260206060909202019081019150612f06565b6040516112db919061363f565b60405180910390a250600101611189565b505050565b60008060006112ff84611e55565b509150915061131082828743612201565b95945050505050565b60446020526000908152604090205481565b600080600061133984611e55565b509150915061134a82828888612201565b9695505050505050565b6008546001600160a01b031681565b60007f9a9a49b990ba9bb39f8048c490a40ab25c18f55d208d5fbcf958261a9b48716d87878760405160200161139c949392919061308b565b6040516020818303038152906040528051906020012090506000604354826040516020016113cb929190612fd7565b6040516020818303038152906040528051906020012090506000600182878787604051600081526020016040526040516114089493929190613107565b6020604051602081039080840390855afa15801561142a573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b03811661145d5760405162461bcd60e51b81526004016106fc90613264565b6001600160a01b0381166000908152604460205260409020805460018101909155881461149c5760405162461bcd60e51b81526004016106fc90613379565b864211156114bc5760405162461bcd60e51b81526004016106fc9061334d565b6114c8818a6000611d78565b6114d4818a6001611d78565b505050505050505050565b7f000000000000000000000000000000000000000000000000000000000000000081565b6001600160a01b0387166115295760405162461bcd60e51b81526004016106fc906133cf565b834211156115495760405162461bcd60e51b81526004016106fc9061334d565b6001600160a01b03871660009081526044602090815260408083205460435491519093926115a3917f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c9918d918d918d9189918e9101613057565b604051602081830303815290604052805190602001206040516020016115ca929190612fd7565b604051602081830303815290604052805190602001209050600181868686604051600081526020016040526040516116059493929190613107565b6020604051602081039080840390855afa158015611627573d6000803e3d6000fd5b505050602060405103516001600160a01b0316896001600160a01b0316146116615760405162461bcd60e51b81526004016106fc90613264565b61166c82600161196f565b6001600160a01b038a166000908152604460205260409020556114d48989896119ae565b61169b338383611d78565b5050565b6001600160a01b03918216600090815260016020908152604080832093909416825291909152205490565b600381565b603c60205260009081526040902080546001909101546001600160801b0380831692600160801b9004169083565b6001600160a01b0382166000908152603e602052604081205480611725576000915050610ab7565b600061177b7f0000000000000000000000000000000000000000000000000000000000000000611775427f0000000000000000000000000000000000000000000000000000000000000000611a62565b90611a62565b90508181111561178e57600091506117e8565b600087821161179d578761179f565b425b9050828110156117b457829350505050610ab7565b6117e46117c1888761196f565b6117de6117ce88876123f1565b6117d88b866123f1565b9061196f565b9061242b565b9250505b5095945050505050565b60007f10d8d059343739efce7dad10d09f0806da52b252b3e6a7951920d2d6ec4102e58888600181111561182257fe5b88886040516020016118389594939291906130af565b604051602081830303815290604052805190602001209050600060435482604051602001611867929190612fd7565b6040516020818303038152906040528051906020012090506000600182878787604051600081526020016040526040516118a49493929190613107565b6020604051602081039080840390855afa1580156118c6573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b0381166118f95760405162461bcd60e51b81526004016106fc90613264565b6001600160a01b038116600090815260446020526040902080546001810190915588146119385760405162461bcd60e51b81526004016106fc90613379565b864211156119585760405162461bcd60e51b81526004016106fc9061334d565b611963818b8b611d78565b50505050505050505050565b60008282018381101561092d5760405162461bcd60e51b81526004016106fc906131cb565b6005805460ff191660ff92909216919091179055565b3390565b6001600160a01b0383166119d45760405162461bcd60e51b81526004016106fc906134b3565b6001600160a01b0382166119fa5760405162461bcd60e51b81526004016106fc90613189565b6001600160a01b0380841660008181526001602090815260408083209487168084529490915290819020849055517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92590611a5590859061304e565b60405180910390a3505050565b600061092d83836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f770000815250611d4c565b600080611ab58530866110136106d9565b6001600160a01b0386166000908152603d602052604081205491925090611adc908361196f565b90508115611310578315611b06576001600160a01b0386166000908152603d602052604090208190555b7f2468f9268c60ad90e2d49edb0032c8a001e733ae888b3ab8e982edf535be1a768683604051611b3792919061302a565b60405180910390a195945050505050565b6001600160a01b038216611b6e5760405162461bcd60e51b81526004016106fc906133f6565b611b7a8260008361246d565b611bb7816040518060600160405280602281526020016136e0602291396001600160a01b0385166000908152602081905260409020549190611d4c565b6001600160a01b038316600090815260208190526040902055600254611bdd9082611a62565b6002556040516000906001600160a01b038416907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90611c1e90859061304e565b60405180910390a35050565b6112ec8363a9059cbb60e01b8484604051602401611c4992919061302a565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b03199093169290921790915261258a565b6000611c8b84610abf565b9050611c9984826001611aa4565b50826001600160a01b0316846001600160a01b031614611d3b576000611cbe84610abf565b9050611ccc84826001611aa4565b506001600160a01b0385166000908152603e6020526040902054611cf2818587856116fd565b6001600160a01b0386166000908152603e60205260409020558284148015611d1957508015155b15611d38576001600160a01b0386166000908152603e60205260408120555b50505b611d4684848461266f565b50505050565b60008184841115611d705760405162461bcd60e51b81526004016106fc9190613125565b505050900390565b6001600160a01b038216611d9e5760405162461bcd60e51b81526004016106fc906135a6565b6000611da982611e55565b925050506000611db885610abf565b90506000611dc68684611e8f565b6001600160a01b03878116600090815260208690526040902080546001600160a01b0319169188169190911790559050611e0281868487612784565b846001600160a01b0316866001600160a01b03167fe8d51c8e11bd570db1734c8ec775785330e77007feed45c43b608ef33ff914bd86604051611e459190613138565b60405180910390a3505050505050565b6000808080846001811115611e6657fe5b1415611e7c57506006915060079050603f611e88565b50604091506041905060425b9193909250565b6001600160a01b038083166000908152602083905260408120549091168061092d57839150506106d3565b600390565b600080805b8351811015611fa8576000603c6000868481518110611edf57fe5b602090810291909101810151516001600160a01b031682528101919091526040016000908120600181015481548851929450611f47926001600160801b0380831692600160801b900416908a9088908110611f3657fe5b602002602001015160400151612970565b9050611f9c611f95878581518110611f5b57fe5b602002602001015160200151838560020160008c6001600160a01b03166001600160a01b0316815260200190815260200160002054612a69565b859061196f565b93505050600101611ec4565b509392505050565b611d46846323b872dd60e01b858585604051602401611c4993929190613006565b6001600160a01b038084166000908152603c60209081526040808320938816835260028401909152812054909190828061200c888588612144565b905080831461208457861561202957612026878285612a69565b91505b6001600160a01b03808a1660008181526002870160205260409081902084905551918a16917fbb123b5c06d5408bbea3c4fef481578175cfb432e3b482c6186f02ed9086585b9061207b90859061304e565b60405180910390a35b50979650505050505050565b6001600160a01b0382166120b65760405162461bcd60e51b81526004016106fc90613608565b6120c26000838361246d565b6002546120cf908261196f565b6002556001600160a01b0382166000908152602081905260409020546120f5908261196f565b6001600160a01b0383166000818152602081905260408082209390935591519091907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90611c1e90859061304e565b6001820154825460009190600160801b90046001600160801b03164281141561216f5750905061092d565b845460009061218a9084906001600160801b03168488612970565b90508281146121de57808660010181905550866001600160a01b03167f5777ca300dfe5bead41006fbce4389794dbc0ed8d6cccebfaf94630aa04184bc826040516121d5919061304e565b60405180910390a25b85546001600160801b03428116600160801b029116178655925050509392505050565b6000438211156122235760405162461bcd60e51b81526004016106fc906134f7565b6001600160a01b038316600090815260208590526040902054806122525761224a84610abf565b915050610ab7565b6001600160a01b038416600090815260208781526040808320600019850184529091529020546001600160801b031683106122c5576001600160a01b038416600090815260208781526040808320600019909401835292905220546001600160801b03600160801b909104169050610ab7565b6001600160a01b0384166000908152602087815260408083208380529091529020546001600160801b0316831015612301576000915050610ab7565b600060001982015b818111156123b3576002828203048103612321612c23565b506001600160a01b038716600090815260208a815260408083208484528252918290208251808401909352546001600160801b03808216808552600160801b909204169183019190915287141561238b57602001516001600160801b03169450610ab79350505050565b80516001600160801b03168711156123a5578193506123ac565b6001820392505b5050612309565b506001600160a01b03851660009081526020888152604080832093835292905220546001600160801b03600160801b90910416915050949350505050565b600082612400575060006106d3565b8282028284828161240d57fe5b041461092d5760405162461bcd60e51b81526004016106fc906132be565b600061092d83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f000000000000815250612a8b565b6001600160a01b038084166000908152603f602052604080822054858416835291205490821691168161249e578491505b6001600160a01b0381166124af5750825b6124bc8282856000612784565b6001600160a01b038086166000908152604260205260408082205487841683529120549082169116816124ed578691505b6001600160a01b0381166124fe5750845b61250b8282876001612784565b6008546001600160a01b0316801561258057604051634a39314960e01b81526001600160a01b03821690634a3931499061254d908b908b908b90600401613006565b600060405180830381600087803b15801561256757600080fd5b505af115801561257b573d6000803e3d6000fd5b505050505b5050505050505050565b61259c826001600160a01b0316612ac2565b6125b85760405162461bcd60e51b81526004016106fc906135d1565b60006060836001600160a01b0316836040516125d49190612fbb565b6000604051808303816000865af19150503d8060008114612611576040519150601f19603f3d011682016040523d82523d6000602084013e612616565b606091505b5091509150816126385760405162461bcd60e51b81526004016106fc9061322f565b805115611d4657808060200190518101906126539190612ee6565b611d465760405162461bcd60e51b81526004016106fc90613525565b6001600160a01b0383166126955760405162461bcd60e51b81526004016106fc90613437565b6001600160a01b0382166126bb5760405162461bcd60e51b81526004016106fc90613146565b6126c683838361246d565b61270381604051806060016040528060268152602001613702602691396001600160a01b0386166000908152602081905260409020549190611d4c565b6001600160a01b038085166000908152602081905260408082209390935590841681522054612732908261196f565b6001600160a01b0380841660008181526020819052604090819020939093559151908516907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90611a5590859061304e565b826001600160a01b0316846001600160a01b031614156127a357611d46565b6000806127af83611e55565b5090925090506001600160a01b03861615612891576001600160a01b0386166000908152602082905260408120548015612820576001600160a01b03881660009081526020858152604080832060001985018452909152902054600160801b90046001600160801b0316915061282c565b61282988610abf565b91505b61284284848a8561283d818c611a62565b612afb565b6001600160a01b0388167fa0a19463ee116110c9b282012d9b65cc5522dc38a9520340cbaf3142e550127f6128778489611a62565b87604051612886929190613691565b60405180910390a250505b6001600160a01b03851615612968576001600160a01b03851660009081526020829052604081205480156128fc576001600160a01b03871660009081526020858152604080832060001985018452909152902054600160801b90046001600160801b03169150612908565b61290587610abf565b91505b6129198484898561283d818c61196f565b6001600160a01b0387167fa0a19463ee116110c9b282012d9b65cc5522dc38a9520340cbaf3142e550127f61294e848961196f565b8760405161295d929190613691565b60405180910390a250505b505050505050565b600083158061297d575081155b80612990575042836001600160801b0316145b806129c457507f0000000000000000000000000000000000000000000000000000000000000000836001600160801b031610155b156129d0575083610ab7565b60007f000000000000000000000000000000000000000000000000000000000000000042116129ff5742612a21565b7f00000000000000000000000000000000000000000000000000000000000000005b90506000612a38826001600160801b038716611a62565b9050612a5e876117d8866117de670de0b6b3a7640000612a588c886123f1565b906123f1565b979650505050505050565b6000610ab7670de0b6b3a76400006117de612a848686611a62565b87906123f1565b60008183612aac5760405162461bcd60e51b81526004016106fc9190613125565b506000838581612ab857fe5b0495945050505050565b6000813f7fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470818114801590610ab7575050151592915050565b6001600160a01b03831660009081526020858152604080832054918890529091204391908115801590612b4c575060001982016000908152602082905260409020546001600160801b038481169116145b15612b81576000198201600090815260208290526040902080546001600160801b03808716600160801b029116179055612580565b6040805180820182526001600160801b038086168252868116602080840191825260008781528682528581209451855493518516600160801b029085166001600160801b031990941693909317909316919091179092556001600160a01b038916815290899052206001830190555050505050505050565b604051806060016040528060006001600160a01b0316815260200160008152602001600081525090565b604080518082019091526000808252602082015290565b80356001600160a01b0381168114610ad957600080fd5b803560028110610ad957600080fd5b803560ff81168114610ad957600080fd5b600060208284031215612c82578081fd5b61092d82612c3a565b60008060408385031215612c9d578081fd5b612ca683612c3a565b9150612cb460208401612c3a565b90509250929050565b600080600060608486031215612cd1578081fd5b612cda84612c3a565b9250612ce860208501612c3a565b9150604084013590509250925092565b600080600080600080600060e0888a031215612d12578283fd5b612d1b88612c3a565b9650612d2960208901612c3a565b95506040880135945060608801359350612d4560808901612c60565b925060a0880135915060c0880135905092959891949750929550565b60008060408385031215612d73578182fd5b612d7c83612c3a565b9150612cb460208401612c51565b600080600080600080600060e0888a031215612da4578283fd5b612dad88612c3a565b9650612d2960208901612c51565b60008060408385031215612dcd578182fd5b612dd683612c3a565b946020939093013593505050565b600080600060608486031215612df8578283fd5b612e0184612c3a565b925060208401359150612e1660408501612c51565b90509250925092565b60008060008060008060c08789031215612e37578182fd5b612e4087612c3a565b95506020870135945060408701359350612e5c60608801612c60565b92506080870135915060a087013590509295509295509295565b60008060208385031215612e88578182fd5b823567ffffffffffffffff80821115612e9f578384fd5b818501915085601f830112612eb2578384fd5b813581811115612ec0578485fd5b866020606083028501011115612ed4578485fd5b60209290920196919550909350505050565b600060208284031215612ef7578081fd5b8151801515811461092d578182fd5b600060208284031215612f17578081fd5b81356001600160801b038116811461092d578182fd5b600060208284031215612f3e578081fd5b5035919050565b60008060008060808587031215612f5a578182fd5b8435935060208501359250612f7160408601612c3a565b9396929550929360600135925050565b60008151808452612f998160208601602086016136b3565b601f01601f19169290920160200192915050565b60028110612fb757fe5b9052565b60008251612fcd8184602087016136b3565b9190910192915050565b61190160f01b81526002810192909252602282015260420190565b6001600160a01b0391909116815260200190565b6001600160a01b039384168152919092166020820152604081019190915260600190565b6001600160a01b03929092168252602082015260400190565b901515815260200190565b90815260200190565b9586526001600160a01b0394851660208701529290931660408501526060840152608083019190915260a082015260c00190565b9384526001600160a01b039290921660208401526040830152606082015260800190565b9485526001600160a01b0393909316602085015260408401919091526060830152608082015260a00190565b9485526020850193909352604084019190915260608301526001600160a01b0316608082015260a00190565b93845260ff9290921660208401526040830152606082015260800190565b60006020825261092d6020830184612f81565b602081016106d38284612fad565b60208082526023908201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260408201526265737360e81b606082015260800190565b60208082526022908201527f45524332303a20617070726f766520746f20746865207a65726f206164647265604082015261737360f01b606082015260800190565b6020808252601b908201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604082015260600190565b6020808252601390820152721253959053125117d6915493d7d05353d55395606a1b604082015260600190565b6020808252818101527f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564604082015260600190565b602080825260119082015270494e56414c49445f5349474e415455524560781b604082015260600190565b60208082526015908201527424a729aaa32324a1a4a2a72a2fa1a7a7a62227aba760591b604082015260600190565b60208082526021908201527f536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f6040820152607760f81b606082015260800190565b6020808252602e908201527f436f6e747261637420696e7374616e63652068617320616c726561647920626560408201526d195b881a5b9a5d1a585b1a5e995960921b606082015260800190565b60208082526012908201527124a72b20a624a22fa2ac2824a920aa24a7a760711b604082015260600190565b6020808252600d908201526c494e56414c49445f4e4f4e434560981b604082015260600190565b60208082526015908201527427a7262cafa2a6a4a9a9a4a7a72fa6a0a720a3a2a960591b604082015260600190565b6020808252600d908201526c24a72b20a624a22fa7aba722a960991b604082015260600190565b60208082526021908201527f45524332303a206275726e2066726f6d20746865207a65726f206164647265736040820152607360f81b606082015260800190565b60208082526025908201527f45524332303a207472616e736665722066726f6d20746865207a65726f206164604082015264647265737360d81b606082015260800190565b60208082526017908201527f554e5354414b455f57494e444f575f46494e4953484544000000000000000000604082015260600190565b60208082526024908201527f45524332303a20617070726f76652066726f6d20746865207a65726f206164646040820152637265737360e01b606082015260800190565b60208082526014908201527324a72b20a624a22fa12627a1a5afa72aa6a122a960611b604082015260600190565b6020808252602a908201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6040820152691bdd081cdd58d8d9595960b21b606082015260800190565b6020808252601b908201527f494e56414c49445f42414c414e43455f4f4e5f434f4f4c444f574e0000000000604082015260600190565b602080825260119082015270494e56414c49445f44454c45474154454560781b604082015260600190565b6020808252601f908201527f5361666545524332303a2063616c6c20746f206e6f6e2d636f6e747261637400604082015260600190565b6020808252601f908201527f45524332303a206d696e7420746f20746865207a65726f206164647265737300604082015260600190565b6001600160801b0391909116815260200190565b6001600160801b0392831681529116602082015260400190565b6001600160801b039384168152919092166020820152604081019190915260600190565b8281526040810161092d6020830184612fad565b60ff91909116815260200190565b60005b838110156136ce5781810151838201526020016136b6565b83811115611d46575050600091015256fe45524332303a206275726e20616d6f756e7420657863656564732062616c616e636545524332303a207472616e7366657220616d6f756e7420657863656564732062616c616e636545524332303a207472616e7366657220616d6f756e74206578636565647320616c6c6f77616e636545524332303a2064656372656173656420616c6c6f77616e63652062656c6f77207a65726fa2646970667358221220835c657efa27f8194b4088570a94cf92e8e81f6d12c17f6e070ffad58425027c64736f6c63430007050033' +
  '0000000000000000000000005b1869D9A4C187F2EAa108f3062412ecf0526b24' + // staked token (changed to local AAVE address)
  '0000000000000000000000005b1869D9A4C187F2EAa108f3062412ecf0526b24' + // reward token (changed to local AAVE address)
  '00000000000000000000000000000000000000000000000000000000000d2f00' + // cooldown
  '000000000000000000000000000000000000000000000000000000000002a300' + // unstake window
  '00000000000000000000000090F8bf6A479f320ead074411a4B0e7944Ea8c9C1' + // vault (changed to accounts[0] address)
  '00000000000000000000000090F8bf6A479f320ead074411a4B0e7944Ea8c9C1' + // emission manager (changed to accounts[0] address)
  '00000000000000000000000000000000000000000000000000000000bbf81e00' + // distribution duration
  '0000000000000000000000000000000000000000000000000000000000000160' + // name offset
  '00000000000000000000000000000000000000000000000000000000000001a0' + // symbol offset
  '0000000000000000000000000000000000000000000000000000000000000012' + // decimals
  '0000000000000000000000000000000000000000000000000000000000000000' + // governance address
  '000000000000000000000000000000000000000000000000000000000000000b' + // name len
  '5374616b65642041415645000000000000000000000000000000000000000000' + // name content
  '0000000000000000000000000000000000000000000000000000000000000007' + // symbol len
  '73746b4141564500000000000000000000000000000000000000000000000000' // symbol content

// from https://etherscan.io/address/0x83d055d382f25e6793099713505c68a5c7535a35#code
const managerBytecode =
  '0x60c0604052600080553480156200001557600080fd5b5060405162001e7138038062001e71833981016040819052620000389162000058565b6001600160601b0319606091821b811660805291901b1660a052620000af565b600080604083850312156200006b578182fd5b8251620000788162000096565b60208401519092506200008b8162000096565b809150509250929050565b6001600160a01b0381168114620000ac57600080fd5b50565b60805160601c60a05160601c611d75620000fc6000398061030552806109a85280610a275280610a4b5280610e49525080610442528061058d5280610af05280610b595250611d756000f3fe608060405234801561001057600080fd5b506004361061012c5760003560e01c80638b599f26116100ad578063cbcbb50711610071578063cbcbb50714610263578063cc69afec1461022b578063dde43cba1461026b578063f11b818814610273578063f5cf673b146102955761012c565b80638b599f2614610218578063919cd40f1461022b57806399248ea714610233578063aaf5eb681461023b578063c4d66de8146102505761012c565b80633373ee4c116100f45780633373ee4c146101b957806339ccbdd3146101cc5780636d34b96e146101df57806374d945ec146101f257806379f171b2146102055761012c565b80631652e7b714610131578063198fa81e1461015c5780631c39b6721461017c5780633111e7b31461019157806331873e2e146101a4575b600080fd5b61014461013f36600461186f565b6102a8565b60405161015393929190611c75565b60405180910390f35b61016f61016a36600461186f565b6102e8565b6040516101539190611c6c565b610184610303565b6040516101539190611af3565b61016f61019f3660046119d1565b610327565b6101b76101b23660046118df565b610371565b005b61016f6101c73660046118a7565b610406565b6101b76101da366004611aa0565b610437565b61016f6101ed366004611a2e565b6104bf565b61018461020036600461186f565b610564565b6101b7610213366004611968565b610582565b61016f610226366004611913565b6107e7565b61016f6109a0565b6101846109a6565b6102436109ca565b6040516101539190611c8b565b6101b761025e36600461186f565b6109cf565b610184610aee565b61016f610b12565b61028661028136600461186f565b610b17565b60405161015393929190611c42565b6101b76102a33660046118a7565b610b4e565b6001600160a01b0316600090815260336020526040902054600160681b81046001600160681b039081169290821691600160d01b900464ffffffffff1690565b6001600160a01b031660009081526035602052604090205490565b7f000000000000000000000000000000000000000000000000000000000000000081565b60006001600160a01b0382166103585760405162461bcd60e51b815260040161034f90611b4e565b60405180910390fd5b610366858585333387610bed565b90505b949350505050565b600061037f84338486610f17565b90508015610400576001600160a01b0384166000908152603560205260409020546103aa9082610fd6565b6001600160a01b038516600081815260356020526040908190209290925590517f2468f9268c60ad90e2d49edb0032c8a001e733ae888b3ab8e982edf535be1a76906103f7908490611c6c565b60405180910390a25b50505050565b6001600160a01b03808216600090815260336020908152604080832093861683526001909301905220545b92915050565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461047f5760405162461bcd60e51b815260040161034f90611bd1565b60348190556040517f1cc1849a6602c3e91f2088cadea4381cc5717f2f28584197060ed2ebb434c16f906104b4908390611c6c565b60405180910390a150565b6001600160a01b038083166000908152603660205260408120549091339185911682146104fe5760405162461bcd60e51b815260040161034f90611c00565b6001600160a01b0385166105245760405162461bcd60e51b815260040161034f90611b20565b6001600160a01b03841661054a5760405162461bcd60e51b815260040161034f90611b4e565b610558888888338989610bed565b98975050505050505050565b6001600160a01b039081166000908152603660205260409020541690565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146105ca5760405162461bcd60e51b815260040161034f90611bd1565b8281146105e95760405162461bcd60e51b815260040161034f90611b7a565b60608367ffffffffffffffff8111801561060257600080fd5b5060405190808252806020026020018201604052801561063c57816020015b6106296117dc565b8152602001906001900390816106215790505b50905060005b848110156107d65785858281811061065657fe5b905060200201602081019061066b919061186f565b82828151811061067757fe5b6020026020010151604001906001600160a01b031690816001600160a01b0316815250508383828181106106a757fe5b905060200201358282815181106106ba57fe5b60209081029190910101516001600160681b0390911690528383828181106106de57fe5b905060200201358282815181106106f157fe5b6020026020010151600001516001600160681b0316146107235760405162461bcd60e51b815260040161034f90611b7a565b85858281811061072f57fe5b9050602002016020810190610744919061186f565b6001600160a01b031663b1bf962d6040518163ffffffff1660e01b815260040160206040518083038186803b15801561077c57600080fd5b505afa158015610790573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b49190611ab8565b8282815181106107c057fe5b6020908102919091018101510152600101610642565b506107e081610fe6565b5050505050565b6001600160a01b03811660009081526035602052604081205460608467ffffffffffffffff8111801561081957600080fd5b5060405190808252806020026020018201604052801561085357816020015b6108406117fc565b8152602001906001900390816108385790505b50905060005b8581101561097f5786868281811061086d57fe5b9050602002016020810190610882919061186f565b82828151811061088e57fe5b60209081029190910101516001600160a01b0390911690528686828181106108b257fe5b90506020020160208101906108c7919061186f565b6001600160a01b0316630afbcdc9866040518263ffffffff1660e01b81526004016108f29190611af3565b604080518083038186803b15801561090957600080fd5b505afa15801561091d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109419190611ad0565b83838151811061094d57fe5b602002602001015160200184848151811061096457fe5b60209081029190910101516040019190915252600101610859565b5061099461098d858361111e565b8390610fd6565b925050505b9392505050565b60345490565b7f000000000000000000000000000000000000000000000000000000000000000090565b601281565b60006109d961121c565b90506000548111610a1b5760405162461bcd60e51b815260040180806020018281038252602e815260200180611cb2602e913960400191505060405180910390fd5b80600081905550610aea7f00000000000000000000000000000000000000000000000000000000000000006000197f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663312f6b836040518163ffffffff1660e01b815260040160206040518083038186803b158015610aa257600080fd5b505afa158015610ab6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ada919061188b565b6001600160a01b03169190611221565b5050565b7f000000000000000000000000000000000000000000000000000000000000000081565b600181565b6033602052600090815260409020546001600160681b0380821691600160681b810490911690600160d01b900464ffffffffff1683565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610b965760405162461bcd60e51b815260040161034f90611bd1565b6001600160a01b0382811660008181526036602052604080822080546001600160a01b0319169486169485179055517f4925eafc82d0c4d67889898eeed64b18488ab19811e61620f387026dec126a289190a35050565b600084610bfc57506000610f0d565b6001600160a01b03831660009081526035602052604090205460608767ffffffffffffffff81118015610c2e57600080fd5b50604051908082528060200260200182016040528015610c6857816020015b610c556117fc565b815260200190600190039081610c4d5790505b50905060005b88811015610d9457898982818110610c8257fe5b9050602002016020810190610c97919061186f565b828281518110610ca357fe5b60209081029190910101516001600160a01b039091169052898982818110610cc757fe5b9050602002016020810190610cdc919061186f565b6001600160a01b0316630afbcdc9876040518263ffffffff1660e01b8152600401610d079190611af3565b604080518083038186803b158015610d1e57600080fd5b505afa158015610d32573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d569190611ad0565b838381518110610d6257fe5b6020026020010151602001848481518110610d7957fe5b60209081029190910101516040019190915252600101610c6e565b506000610da18683611339565b90508015610df757610db38382610fd6565b9250856001600160a01b03167f2468f9268c60ad90e2d49edb0032c8a001e733ae888b3ab8e982edf535be1a7682604051610dee9190611c6c565b60405180910390a25b82610e085760009350505050610f0d565b6000838911610e175788610e19565b835b6001600160a01b03808916600090815260356020526040908190208388039055516356e4bb9760e11b81529192507f0000000000000000000000000000000000000000000000000000000000000000169063adc9772e90610e809089908590600401611b07565b600060405180830381600087803b158015610e9a57600080fd5b505af1158015610eae573d6000803e3d6000fd5b50505050876001600160a01b0316866001600160a01b0316886001600160a01b03167f5637d7f962248a7f05a7ab69eec6446e31f3d0a299d997f135a65c62806e789184604051610eff9190611c6c565b60405180910390a493505050505b9695505050505050565b6001600160a01b0380841660009081526033602090815260408083209388168352600184019091528120549091908280610f528885886113a5565b9050808314610fca578615610f6f57610f6c8782856114d5565b91505b6001600160a01b03808a1660008181526001870160205260409081902084905551918a16917fbb123b5c06d5408bbea3c4fef481578175cfb432e3b482c6186f02ed9086585b90610fc1908590611c6c565b60405180910390a35b50979650505050505050565b8082018281101561043157600080fd5b60005b8151811015610aea5760006033600084848151811061100457fe5b6020026020010151604001516001600160a01b03166001600160a01b03168152602001908152602001600020905061106b83838151811061104157fe5b6020026020010151604001518285858151811061105a57fe5b6020026020010151602001516113a5565b5082828151811061107857fe5b60209081029190910101515181546cffffffffffffffffffffffffff19166001600160681b0390911617815582518390839081106110b257fe5b6020026020010151604001516001600160a01b03167f87fa03892a0556cb6b8f97e6d533a150d4d55fcbf275fff5fa003fa636bcc7fa8484815181106110f457fe5b60200260200101516000015160405161110d9190611c2e565b60405180910390a250600101610fe9565b600080805b83518110156112145760006033600086848151811061113e57fe5b602090810291909101810151516001600160a01b031682528101919091526040016000908120805487519193506111b391600160681b82046001600160681b039081169290811691600160d01b90910464ffffffffff16908a90889081106111a257fe5b602002602001015160400151611504565b90506112086112018785815181106111c757fe5b602002602001015160200151838560010160008c6001600160a01b03166001600160a01b03168152602001908152602001600020546114d5565b8590610fd6565b93505050600101611123565b509392505050565b600190565b8015806112a7575060408051636eb1769f60e11b81523060048201526001600160a01b03848116602483015291519185169163dd62ed3e91604480820192602092909190829003018186803b15801561127957600080fd5b505afa15801561128d573d6000803e3d6000fd5b505050506040513d60208110156112a357600080fd5b5051155b6112e25760405162461bcd60e51b8152600401808060200182810382526036815260200180611d0a6036913960400191505060405180910390fd5b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b1790526113349084906115a4565b505050565b600080805b83518110156112145761139b61098d8686848151811061135a57fe5b60200260200101516000015187858151811061137257fe5b60200260200101516020015188868151811061138a57fe5b602002602001015160400151610f17565b915060010161133e565b81546000906001600160681b03600160681b82048116919081169064ffffffffff600160d01b90910416428114156113e257829350505050610999565b60006113f084848489611504565b90508381146114ab5780816001600160681b0316146114215760405162461bcd60e51b815260040161034f90611ba9565b86546cffffffffffffffffffffffffff60681b1916600160681b6001600160681b038316021764ffffffffff60d01b1916600160d01b4264ffffffffff16021787556040516001600160a01b038916907f5777ca300dfe5bead41006fbce4389794dbc0ed8d6cccebfaf94630aa04184bc9061149e908490611c6c565b60405180910390a26114ca565b865464ffffffffff60d01b1916600160d01b4264ffffffffff16021787555b979650505050505050565b6000670de0b6b3a76400006114f46114ed858561175c565b869061176c565b816114fb57fe5b04949350505050565b603454600090841580611515575082155b80611528575042846001600160801b0316145b8061153c575080846001600160801b031610155b1561154a5785915050610369565b6000814211611559574261155b565b815b90506000611572826001600160801b03881661175c565b90506105588861159e87611598670de0b6b3a76400006115928d8861176c565b9061176c565b90611790565b90610fd6565b6115b6826001600160a01b03166117a3565b611607576040805162461bcd60e51b815260206004820152601f60248201527f5361666545524332303a2063616c6c20746f206e6f6e2d636f6e747261637400604482015290519081900360640190fd5b60006060836001600160a01b0316836040518082805190602001908083835b602083106116455780518252601f199092019160209182019101611626565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d80600081146116a7576040519150601f19603f3d011682016040523d82523d6000602084013e6116ac565b606091505b509150915081611703576040805162461bcd60e51b815260206004820181905260248201527f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564604482015290519081900360640190fd5b8051156104005780806020019051602081101561171f57600080fd5b50516104005760405162461bcd60e51b815260040180806020018281038252602a815260200180611ce0602a913960400191505060405180910390fd5b8082038281111561043157600080fd5b60008215806117875750508181028183828161178457fe5b04145b61043157600080fd5b600081838161179b57fe5b049392505050565b6000813f7fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470818114801590610369575050151592915050565b604080516060810182526000808252602082018190529181019190915290565b604051806060016040528060006001600160a01b0316815260200160008152602001600081525090565b60008083601f840112611837578182fd5b50813567ffffffffffffffff81111561184e578182fd5b602083019150836020808302850101111561186857600080fd5b9250929050565b600060208284031215611880578081fd5b813561099981611c99565b60006020828403121561189c578081fd5b815161099981611c99565b600080604083850312156118b9578081fd5b82356118c481611c99565b915060208301356118d481611c99565b809150509250929050565b6000806000606084860312156118f3578081fd5b83356118fe81611c99565b95602085013595506040909401359392505050565b600080600060408486031215611927578283fd5b833567ffffffffffffffff81111561193d578384fd5b61194986828701611826565b909450925050602084013561195d81611c99565b809150509250925092565b6000806000806040858703121561197d578081fd5b843567ffffffffffffffff80821115611994578283fd5b6119a088838901611826565b909650945060208701359150808211156119b8578283fd5b506119c587828801611826565b95989497509550505050565b600080600080606085870312156119e6578384fd5b843567ffffffffffffffff8111156119fc578485fd5b611a0887828801611826565b909550935050602085013591506040850135611a2381611c99565b939692955090935050565b600080600080600060808688031215611a45578081fd5b853567ffffffffffffffff811115611a5b578182fd5b611a6788828901611826565b909650945050602086013592506040860135611a8281611c99565b91506060860135611a9281611c99565b809150509295509295909350565b600060208284031215611ab1578081fd5b5035919050565b600060208284031215611ac9578081fd5b5051919050565b60008060408385031215611ae2578182fd5b505080516020909101519092909150565b6001600160a01b0391909116815260200190565b6001600160a01b03929092168252602082015260400190565b602080825260149082015273494e56414c49445f555345525f4144445245535360601b604082015260600190565b602080825260129082015271494e56414c49445f544f5f4144445245535360701b604082015260600190565b60208082526015908201527424a72b20a624a22fa1a7a72324a3aaa920aa24a7a760591b604082015260600190565b6020808252600e908201526d496e646578206f766572666c6f7760901b604082015260600190565b60208082526015908201527427a7262cafa2a6a4a9a9a4a7a72fa6a0a720a3a2a960591b604082015260600190565b60208082526014908201527310d3105253515497d5539055551213d49256915160621b604082015260600190565b6001600160681b0391909116815260200190565b6001600160681b03938416815291909216602082015264ffffffffff909116604082015260600190565b90815260200190565b9283526020830191909152604082015260600190565b60ff91909116815260200190565b6001600160a01b0381168114611cae57600080fd5b5056fe436f6e747261637420696e7374616e63652068617320616c7265616479206265656e20696e697469616c697a65645361666545524332303a204552433230206f7065726174696f6e20646964206e6f7420737563636565645361666545524332303a20617070726f76652066726f6d206e6f6e2d7a65726f20746f206e6f6e2d7a65726f20616c6c6f77616e6365a2646970667358221220d94e1a7bc1c2da8e7f89644f4c7824cbb4d6c28be01bda08c043c6db1633574f64736f6c63430007050033' +
  '0000000000000000000000004da27a545c0c5b758a6ba100e3a049001de870f5' + // stake token (replaced in runtime)
  '00000000000000000000000090F8bf6A479f320ead074411a4B0e7944Ea8c9C1' // emission manager (changed to accounts[0] address)

async function getAAVEContracts(web3, from) {
  const dai = await IMintableERC20.at('0xe78A0F7E598Cc8b0Bb87894B0F60dD2a88d6a8Ab')
  const usdc = await IMintableERC20.at('0xD833215cBcc3f914bD1C9ece3EE7BF8B14f841bb')
  const aDai = await IERC20.at('0xb62439d2627C23Dccf22931688A879B6E12A5a2f')
  const lendingPool = await ILendingPool.at('0xDe4e2b5D55D2eE0F95b6D96C1BF86b45364e45B0')
  const aave = await IMintableERC20.at('0x5b1869D9A4C187F2EAa108f3062412ecf0526b24')

  const receipt = await web3.eth.sendTransaction({ data: stkAAVEBytecode, from, gas: 8000000 })
  const newManagerBytecode =
    managerBytecode.slice(0, managerBytecode.length - 104) +
    receipt.contractAddress.slice(2) +
    managerBytecode.slice(managerBytecode.length - 64)
  const receipt2 = await web3.eth.sendTransaction({ data: newManagerBytecode, from, gas: 8000000 })

  const stkAAVE = await IStakedAave.at(receipt.contractAddress)
  const incentivesController = await IStakedTokenIncentivesController.at(receipt2.contractAddress)
  return { dai, usdc, aDai, lendingPool, aave, stkAAVE, incentivesController }
}

module.exports = getAAVEContracts
